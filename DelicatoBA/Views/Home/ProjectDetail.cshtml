@model DelicatoBA.ViewModel.ProjectDetailViewModel
@using DelicatoBA.Models
@{
    var config = (ConfigSite)HttpContext.Current.Application["ConfigSite"];
}
@{
    ViewBag.Title = Model.Project.TitleMeta ?? Model.Project.Name;
    ViewBag.Description = Model.Project.DescriptionMeta ?? Model.Project.Description;

    ViewBag.Canonical = Request.Url?.GetLeftPart(UriPartial.Authority) + Url.Action("ProjectDetail", new { url = Model.Project.Url });

    if (Model.Project.ListImage != null)
    {
        ViewBag.ImagShare = Request.Url?.GetLeftPart(UriPartial.Authority) + Path.Combine("/images/projects/", Model.Project.ListImage.Split(',')[0]);
    }
}
<div class="bg-breadcrumb">
    <div class="container">
        <ol class="breadcrumb mb-0">
            <li class="breadcrumb-item"><a href="@Url.Action("Index")"><i class="fal fa-home mr-1"></i> Trang chủ</a></li>
            <li class="breadcrumb-item"><a href="@Url.Action("AllProject")">Dự án</a></li>
            <li class="breadcrumb-item"><a href="@Url.Action("ProjectCategory", new { url = Model.Project.ProjectCategory.Url })">@Model.Project.ProjectCategory.CategoryName</a></li>
            <li class="breadcrumb-item active" aria-current="page"> @Model.Project.Name</li>
        </ol>
    </div>
</div>

<div class="project-detail">
    <div class="container">
        <div class="title text-center my-4">@Model.Project.Name</div>
        <div class="box-border">
            @if(Model.Project.ListImage != null)
            {
                var arr = Model.Project.ListImage.Split(',');
                <div class="product-gallery">
                    @foreach(var img in arr) 
                    { 
                    <div class="item">
                        <a href="@Path.Combine("/images/projects/", img)" data-fancybox="gallery">
                            <img data-lazy="@Path.Combine("/images/projects/", img)" src="@Path.Combine("/images/projects/", img)" alt="@Model.Project.Name" />
                        </a>
                    </div>
                    
                    }
                </div>
                if(arr.Length > 0)
                {
                <div class="product-nav">
                    @foreach (var img in arr)
                    {
                    <div class="item">
                        <img src="@Path.Combine("/images/projects/", img)" alt="@Model.Project.Name" />
                    </div>

                    }    
                
                </div>

                }    

            }
            <hr>
            <div class="product-info pt-lg-0 pt-3">
                <strong>Mô tả dự án</strong>
                @Html.Raw(Model.Project.Body)
            </div>
        </div>
        @if (Model.Projects.Any()) 
        { 
        <h3 class="title-category text-center my-lg-5 my-4">Dự án liên quan</h3>
        <div class="row">
            @foreach(var project in Model.Projects)
            { 
            <div class="col-lg-4 col-md-6 col-12">
                @Html.Partial("_ItemProject", project)
            </div>
            
            }
            
        </div>
        }
    </div>
</div>